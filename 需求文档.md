# 暖心便签弹窗阵列 - 需求文档

## 1. 项目概述

### 1.1 项目名称
暖心便签弹窗阵列（Warmth Popup Notes Array）

### 1.2 项目背景
为了给亲朋好友送上温馨的生日祝福或日常关怀，需要一个能够以视觉冲击力强、内容温馨的方式展示关怀话语的桌面应用程序。

### 1.3 项目目标
- 创建一个美观、易用的桌面弹窗程序
- 通过大量精美弹窗展示暖心话语
- 提供生日祝福的特殊展示模式
- 支持一键打包分发，无需安装Python环境

### 1.4 目标用户
- 想要给朋友/家人送生日祝福的用户
- 需要节日祝福创意的用户
- 希望给身边人送上温暖关怀的用户
- 不具备编程基础的普通用户

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 弹窗显示功能
**需求描述**：程序运行后，在屏幕上随机位置创建多个精美的弹窗，每个弹窗显示一条暖心话语。

**功能要求**：
- 弹窗数量可配置，默认150个
- 弹窗随机分布在屏幕上，避免集中在角落
- 每个弹窗显示独特的消息内容，不重复（当弹窗数量超过消息库时可重复）
- 弹窗创建有时间间隔，形成渐进式展示效果
- 默认间隔80毫秒，可通过参数调整

**界面要求**：
- 圆角矩形设计，圆角半径36像素
- 无边框、无标题栏
- 柔和的马卡龙色系背景（随机生成）
- 窗口大小：260×150像素
- 窗口始终置顶显示

#### 2.1.2 消息内容功能
**需求描述**：程序内置丰富的中英文暖心话语库，随机选择展示。

**内容要求**：
- 中文消息50条：
  - 毛泽东经典语录13条（体现正能量和励志精神）
  - 日常关怀体贴话语37条
- 英文消息50条：温馨关怀短语
- 总计100条独特消息

**消息示例**：
- 中文："记得多喝水，照顾好自己"、"好好学习，天天向上"
- 英文："Take good care of yourself today"、"You are loved more than you know"

#### 2.1.3 字体显示功能
**需求描述**：根据消息语言自动选择合适的字体进行显示。

**功能要求**：
- 中文消息使用宋体（SimSun）
- 英文消息使用Times New Roman
- 字体大小：15号
- 字体样式：加粗
- 文字颜色：深灰色（#2c2c2c）
- 文字居中对齐

**技术实现**：
- 通过Unicode字符范围判断（\u4e00-\u9fff）识别中文
- 自动切换字体family

#### 2.1.4 生日祝福弹窗功能
**需求描述**：所有普通弹窗显示完毕后，在屏幕中央显示一个特殊的生日祝福弹窗。

**功能要求**：
- 显示内容："Happy birthday to you!"
- 窗口尺寸：420×220像素
- 圆角半径：48像素
- 固定颜色：粉色（#f7cade）
- 位置：屏幕正中央
- 字体：Times New Roman，18号，加粗
- 包含关闭按钮：右上角"X"按钮

**交互要求**：
- 点击"X"按钮关闭所有弹窗
- 支持ESC键关闭所有弹窗
- 关闭后程序退出

#### 2.1.5 窗口管理功能
**需求描述**：所有弹窗不自动关闭，统一通过最后的生日弹窗关闭。

**功能要求**：
- 普通弹窗无关闭按钮
- 普通弹窗不响应点击事件
- 所有弹窗保持在最前端
- 通过生日弹窗的关闭按钮统一关闭所有窗口

### 2.2 命令行参数功能

#### 2.2.1 弹窗数量参数
**参数名**：`--count N`

**功能描述**：设置创建的弹窗数量

**默认值**：150

**使用示例**：
```bash
暖心便签弹窗阵列.exe --count 100
```

#### 2.2.2 间隔时间参数
**参数名**：`--stagger ms`

**功能描述**：设置每个弹窗创建的间隔时间（毫秒）

**默认值**：80

**使用示例**：
```bash
暖心便签弹窗阵列.exe --stagger 50
```

#### 2.2.3 测试模式参数
**参数名**：`--test`

**功能描述**：快速测试模式，只创建5个弹窗

**使用示例**：
```bash
暖心便签弹窗阵列.exe --test
```

### 2.3 打包发布功能

**需求描述**：程序需要能够打包成独立的exe文件，方便分发给没有Python环境的用户。

**功能要求**：
- 打包成单个exe文件
- 无需安装Python环境即可运行
- 包含所有依赖库（tkinter、tcl/tk等）
- 文件大小控制在15MB以内
- 运行时无控制台窗口（--windowed模式）

**打包工具**：PyInstaller 6.16.0+

## 3. 非功能性需求

### 3.1 性能需求
- 程序启动时间：<2秒
- 弹窗创建速度：80ms/个（可调整）
- 内存占用：<200MB
- CPU占用：<10%（稳定运行时）
- 支持分辨率：1024×768及以上

### 3.2 兼容性需求
- 操作系统：Windows 10/11
- Python版本：3.8及以上（源码运行）
- 屏幕分辨率：最低1024×768
- 其他依赖：tkinter（Python标准库）

### 3.3 可用性需求
- 界面美观，圆角设计
- 操作简单，双击即可运行
- 支持命令行参数自定义
- 提供测试模式快速预览
- 一键关闭所有弹窗

### 3.4 可维护性需求
- 代码结构清晰，函数职责分明
- 消息库独立维护，易于扩展
- 配置参数化，便于调整
- 完整的注释文档

### 3.5 安全性需求
- 不涉及网络通信
- 不访问敏感文件
- 不修改系统配置
- 无后台进程

## 4. 技术规格

### 4.1 技术栈
- **编程语言**：Python 3.13.5
- **GUI框架**：tkinter
- **打包工具**：PyInstaller 6.16.0
- **版本控制**：Git
- **代码托管**：GitHub

### 4.2 核心技术

#### 4.2.1 窗口透明技术
- 使用透明色（#010101）实现无边框效果
- 通过`wm_attributes("-transparentcolor")`实现透明
- 使用Canvas绘制圆角矩形

#### 4.2.2 圆角绘制技术
- Canvas绘制矩形和椭圆组合
- 分别绘制中心矩形、四边矩形、四角椭圆
- 保证圆角平滑过渡

#### 4.2.3 随机布局算法
- 使用`random.randint()`生成随机坐标
- 设置边距避免窗口超出屏幕
- 水平边距：80像素
- 垂直边距：120像素

#### 4.2.4 颜色生成算法
```python
r = int((random.randint(150, 255) + 255) / 2)
g = int((random.randint(150, 255) + 255) / 2)
b = int((random.randint(150, 255) + 255) / 2)
```
确保生成柔和的马卡龙色系

### 4.3 文件结构
```
项目根目录/
├── 暖心便签弹窗阵列.py      # 主程序源码
├── 暖心便签弹窗阵列.spec    # PyInstaller配置文件
├── build.ps1               # Windows打包脚本
├── README.md               # 项目说明文档
├── 需求文档.md             # 本文档
├── 打包说明.md             # 打包详细说明
├── .gitignore              # Git忽略配置
└── dist/                   # 打包输出目录
    └── 暖心便签弹窗阵列.exe # 可执行文件
```

## 5. 用户故事

### 5.1 生日祝福场景
**作为**一个想给朋友庆祝生日的用户

**我想要**运行这个程序展示生日祝福

**以便于**给朋友一个惊喜和温馨的祝福

**验收标准**：
- [ ] 程序启动后自动创建150个弹窗
- [ ] 每个弹窗显示不同的暖心话语
- [ ] 最后显示"Happy birthday to you!"
- [ ] 界面美观，色彩柔和
- [ ] 可以一键关闭所有弹窗

### 5.2 快速测试场景
**作为**一个首次使用的用户

**我想要**先测试一下效果

**以便于**确认程序是否符合预期

**验收标准**：
- [ ] 使用--test参数只显示5个弹窗
- [ ] 快速预览效果
- [ ] 不影响系统性能
- [ ] 可以快速关闭

### 5.3 自定义配置场景
**作为**一个有特殊需求的用户

**我想要**调整弹窗数量和速度

**以便于**适应不同的使用场景

**验收标准**：
- [ ] 可以通过--count参数设置弹窗数量
- [ ] 可以通过--stagger参数调整显示速度
- [ ] 参数组合使用正常
- [ ] 有合理的默认值

## 6. 验收标准

### 6.1 功能验收
- [ ] 所有弹窗正常显示
- [ ] 消息内容不重复（在消息库范围内）
- [ ] 字体根据语言自动切换
- [ ] 生日弹窗正常显示在中央
- [ ] 关闭按钮功能正常
- [ ] 命令行参数功能正常

### 6.2 界面验收
- [ ] 圆角效果美观
- [ ] 无白色边框
- [ ] 颜色柔和协调
- [ ] 文字清晰可读
- [ ] 布局合理，不重叠

### 6.3 性能验收
- [ ] 150个弹窗创建时间<12秒
- [ ] 内存占用<200MB
- [ ] CPU占用稳定
- [ ] 无卡顿、崩溃现象

### 6.4 兼容性验收
- [ ] Windows 10运行正常
- [ ] Windows 11运行正常
- [ ] 不同分辨率适配良好
- [ ] 打包后的exe文件可独立运行

## 7. 约束条件

### 7.1 技术约束
- 必须使用Python标准库（tkinter）
- 不能依赖外部网络
- 需要支持Windows平台
- 打包后文件大小限制在15MB以内

### 7.2 时间约束
- 开发周期：已完成
- 测试周期：1天
- 发布周期：即时

### 7.3 资源约束
- 单人开发维护
- 无服务器成本
- 完全开源免费

## 8. 风险分析

### 8.1 技术风险
| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|----------|
| tkinter DLL缺失 | 中 | 高 | 手动复制DLL文件，修改spec文件 |
| 打包失败 | 低 | 中 | 提供详细打包说明，使用spec文件 |
| 字体显示异常 | 低 | 低 | 使用系统默认字体作为备选 |

### 8.2 用户体验风险
| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|----------|
| 弹窗数量过多导致卡顿 | 中 | 中 | 提供--count参数调整，建议测试 |
| 消息内容不符合预期 | 低 | 低 | 消息库可自定义修改 |
| 关闭操作不明显 | 低 | 低 | README中明确说明操作方法 |

## 9. 未来规划

### 9.1 短期计划（v1.x）
- [ ] 添加更多消息内容
- [ ] 支持自定义消息文件
- [ ] 优化打包体积
- [ ] 添加音效支持（可选）

### 9.2 中期计划（v2.x）
- [ ] 支持自定义主题颜色
- [ ] 支持图片背景
- [ ] 添加动画效果
- [ ] 支持MacOS平台

### 9.3 长期计划（v3.x）
- [ ] 图形化配置界面
- [ ] 预设多种祝福模板
- [ ] 支持视频/GIF显示
- [ ] 跨平台支持（Linux）

## 10. 附录

### 10.1 术语表
- **弹窗**：独立的顶层窗口，用于显示消息
- **圆角**：窗口四角的圆弧设计
- **马卡龙色系**：柔和、淡雅的色彩风格
- **Canvas**：tkinter中的画布组件

### 10.2 参考资料
- Python tkinter官方文档
- PyInstaller官方文档
- GitHub项目地址：https://github.com/Iwillbecomestrong/nuanxinbiaoqian

### 10.3 更新记录
| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.0 | 2025-11-02 | 初始版本，完成核心功能 |

---

**文档编写日期**：2025年11月2日  
**文档版本**：v1.0  
**维护人员**：Iwillbecomestrong
